= Graph to Relational

== Importing Northwind into Postgres SQL

```
createdb -u postgres london.meetup
psql -U postgres -d london.meetup < data/northwind.postgre.sql
```

View the data using pgadmin
```
http://www.postgresql.org/ftp/pgadmin3/release/v1.20.0/osx/
```

== View the ER diagram

* Print this out and give people a copy of it when we get to this point
* How do we generate this from pgadmin?


== Export the data

* link:data/export/export-from-postgres.sql[Export from Postgres]

== Import the data

* link:data/import/nodes.cql[Nodes]

```
CREATE INDEX ON :Product(ProductID);
CREATE INDEX ON :Category(CategoryID);
CREATE INDEX ON :Employee(EmployeeID);
CREATE INDEX ON :Supplier(SupplierID);
CREATE INDEX ON :Customer(CustomerID);
```

```
LOAD CSV WITH HEADERS FROM "file:/tmp/orders.csv" AS row
CREATE (order:Order {OrderID: row.OrderID, ShipName: row.ShipName})

WITH *
MATCH (product:Product {ProductID: row.ProductID})
MATCH (employee:Employee {EmployeeID: row.EmployeeID})

MERGE (employee)-[:SOLD]->(order)
MERGE (order)-[:PRODUCT]->(product);
```

```
LOAD CSV WITH HEADERS FROM "file:/tmp/products.csv" AS row
MATCH (product:Product {ProductID: row.ProductID})
MATCH (supplier:Supplier {SupplierID: row.SupplierID})
MATCH (category:Category {CategoryID: row.CategoryID})

MERGE (supplier)-[:SUPPLIES]->(product)
MERGE (product)-[:PART_OF]->(category);
```

```
LOAD CSV WITH HEADERS FROM "file:/tmp/employees.csv" AS row
MATCH (employee:Employee {EmployeeID: row.EmployeeID})
MATCH (manager:Employee {EmployeeID: row.ReportsTo})
MERGE (employee)-[:REPORTS_TO]->(manager);
```

```
CREATE INDEX ON :Order(OrderId);
```
